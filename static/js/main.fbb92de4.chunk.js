(this.webpackJsonpecomm=this.webpackJsonpecomm||[]).push([[0],{15:function(e,t,a){"use strict";a.r(t),a.d(t,"USER_SIGNIN_REQUEST",(function(){return n})),a.d(t,"USER_SIGNIN_SUCCESS",(function(){return r})),a.d(t,"USER_SIGNIN_FAIL",(function(){return c})),a.d(t,"USER_REGISTER_REQUEST",(function(){return l})),a.d(t,"USER_REGISTER_SUCCESS",(function(){return u})),a.d(t,"USER_REGISTER_FAIL",(function(){return i}));var n="USER_SIGNIN_REQUEST",r="USER_SIGNIN_SUCCESS",c="USER_SIGNIN_FAIL",l="USER_REGISTER_REQUEST",u="USER_REGISTER_SUCCESS",i="USER_REGISTER_FAIL"},43:function(e,t,a){e.exports=a(81)},52:function(e,t,a){},53:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(2),l=a(23),u=a.n(l),i=(a(52),a(53),a(5)),o=a(3),m=a(41),s=a.n(m),E=a(6),d=a.n(E),p=a(12),S=a(13),f=a.n(S),b=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_REQUEST"}),e.next=4,f.a.get("/api/products");case 4:a=e.sent,n=a.data,t({type:"PRODUCT_LIST_SUCCESS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"PRODUCT_LIST_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()};var v=function(e){var t=Object(c.c)((function(e){return e.productList})),a=t.products,l=t.loading,u=t.error,o=Object(c.b)();return Object(n.useEffect)((function(){return o(b()),function(){}}),[]),l?r.a.createElement("div",null,"Loading..."):u?r.a.createElement("div",null,u):r.a.createElement("ul",{className:"products"},a.map((function(e){return r.a.createElement("li",{key:s.a.generate()},r.a.createElement("div",{className:"product"},r.a.createElement(i.b,{to:"/product/"+e._id},r.a.createElement("img",{className:"product-image",src:e.image,alt:"Product"})),r.a.createElement("div",{className:"product-name"},r.a.createElement(i.b,{to:"/product/"+e._id},e.name)),r.a.createElement("div",{className:"product-brand"},e.brand),r.a.createElement("div",{className:"product-price"},"$",e.price),r.a.createElement("div",{className:"product-rating"},e.rating," Stars (",e.numReviews," Reviews)")))})))},g=a(18),h=a(4);var y=function(e){var t=Object(n.useState)(1),a=Object(h.a)(t,2),l=a[0],u=a[1],o=Object(c.c)((function(e){return e.productDetails})),m=o.product,s=o.loading,E=o.error,S=Object(c.b)();return Object(n.useEffect)((function(){var t;return S((t=e.match.params.id,function(){var e=Object(p.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_DETAILS_REQUEST",payload:t}),e.next=4,f.a.get("/api/products/"+t);case 4:n=e.sent,r=n.data,a({type:"PRODUCT_DETAILS_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:"PRODUCT_DETAILS_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),function(){}}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"back-to-result"},r.a.createElement(i.b,{to:"/"}," Back to result")),s?r.a.createElement("div",null," Loading... "):E?r.a.createElement("div",null,E):r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"details-image"},r.a.createElement("img",{src:m.image,alt:"Product"})),r.a.createElement("div",{className:"details-info"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h4",null,m.name)),r.a.createElement("li",null,m.rating," Stars (",m.numReviews," Reviews)"),r.a.createElement("li",null,"Price: ",r.a.createElement("b",null,"$",m.price)),r.a.createElement("li",null,"Description:",r.a.createElement("div",null,m.description)))),r.a.createElement("div",{className:"details-action"},r.a.createElement("ul",null,r.a.createElement("li",null,"Price: ",r.a.createElement("b",null,"$",m.price)),r.a.createElement("li",null,"Status: ",m.countInStock>0?"In Stock":"Unavailable"),r.a.createElement("li",null,"Qty:",r.a.createElement("select",{value:l,onChange:function(e){u(e.target.value)}},Object(g.a)(Array(m.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)})))),r.a.createElement("li",null,m.countInStock>0&&r.a.createElement("button",{onClick:function(){e.history.push("/cart/"+e.match.params.id+"?qty="+l)},className:"button primary"},"Add to Cart"))))))},I=a(14),_=a.n(I),R=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n,r){var c,l,u,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("/api/products/"+e);case 3:c=a.sent,l=c.data,n({type:"CART_ADD_ITEM",payload:{product:l._id,name:l.name,image:l.image,price:l.price,countInStock:l.countInStock,qty:t}}),u=r(),i=u.cart.cartItems,_.a.set("cartItems",JSON.stringify(i)),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(0);case 12:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()};var O=function(e){var t=Object(c.c)((function(e){return e.cart})).cartItems,a=e.match.params.id,l=e.location.search?Number(e.location.search.split("=")[1]):1,u=Object(c.b)(),o=function(e){u(function(e){return function(t,a){t({type:"CART_REMOVE_ITEMS",payload:e});var n=a().cart.cartItems;_.a.set("cartItems",JSON.stringify(n))}}(e))};return Object(n.useEffect)((function(){a&&u(R(a,l))}),[]),r.a.createElement("div",{className:"cart"},r.a.createElement("div",{className:"cart-list"},r.a.createElement("ul",{className:"cart-list-container"},r.a.createElement("li",null,r.a.createElement("h3",null,"Shopping Cart"),r.a.createElement("div",null,"Price")),0===t.length?r.a.createElement("div",null,"Cart is empty"):t.map((function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.image,alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement("div",null,r.a.createElement(i.b,{to:"/product/"+e.product},e.name)),r.a.createElement("div",null,"Qty:",r.a.createElement("select",{value:e.qty,onChange:function(t){return u(R(e.product,t.target.value))}},Object(g.a)(Array(e.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)}))),r.a.createElement("button",{type:"button",className:"button",onClick:function(){return o(e.product)}},"Delete"))),r.a.createElement("div",{className:"cart-price"},"$",e.price))})))),r.a.createElement("div",{className:"cart-action"},r.a.createElement("h3",null," Subtotal (",t.reduce((function(e,t){return e+t.qty}),0)," items) : $ ",t.reduce((function(e,t){return e+t.price*t.qty}),0)),r.a.createElement("button",{onClick:function(){e.history.push("/signin?redirect=shipping")},className:"button primary full-width",disabled:0===t.length},"Proceed to Checkout")))},C=a(15);var N=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),l=a[0],u=a[1],o=Object(n.useState)(""),m=Object(h.a)(o,2),s=m[0],E=m[1],S=Object(c.c)((function(e){return e.userSignin})),b=S.loading,v=S.userInfo,g=S.error,y=Object(c.b)();return Object(n.useEffect)((function(){return v&&e.history.push("/"),function(){}}),[v]),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y(function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:C.USER_SIGNIN_REQUEST,payload:{email:e,password:t}}),a.prev=1,a.next=4,f.a.post("/api/users/signin",{email:e,password:t});case 4:r=a.sent,c=r.data,n({type:C.USER_SIGNIN_SUCCESS,payload:c}),_.a.set("userInfo",JSON.stringify(c)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),n({type:C.USER_SIGNIN_FAIL,payload:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}(l,s))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Sign-In")),r.a.createElement("li",null,b&&r.a.createElement("div",null,"Loading..."),g&&r.a.createElement("div",null,g)),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){return u(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:function(e){return E(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Sign In")),r.a.createElement("li",null,"New User?"),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/register",className:"button text-center secondary"},"Create your account")))))};var U=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),l=a[0],u=a[1],o=Object(n.useState)(""),m=Object(h.a)(o,2),s=m[0],E=m[1],S=Object(n.useState)(""),b=Object(h.a)(S,2),v=b[0],g=b[1],y=Object(n.useState)(""),I=Object(h.a)(y,2),R=(I[0],I[1],Object(c.c)((function(e){return e.userRegister}))),O=R.loading,N=R.userInfo,U=R.error,T=Object(c.b)();return Object(n.useEffect)((function(){return N&&e.history.push("/"),function(){}}),[N]),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),T(function(e,t,a){return function(){var n=Object(p.a)(d.a.mark((function n(r){var c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:C.USER_REGISTER_REQUEST,payload:{name:e,email:t,password:a}}),n.prev=1,n.next=4,f.a.post("/api/users/register",{name:e,email:t,password:a});case 4:c=n.sent,l=c.data,r({type:C.USER_REGISTER_SUCCESS,payload:l}),_.a.set("userInfo",JSON.stringify(l)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),r({type:C.USER_REGISTER_FAIL,payload:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}(l,s,v))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Create Account")),r.a.createElement("li",null,O&&r.a.createElement("div",null,"Loading..."),U&&r.a.createElement("div",null,U)),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"name",name:"name",id:"name",onChange:function(e){return u(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){return E(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:function(e){return g(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"rePassword"},"Re-Enter Password"),r.a.createElement("input",{type:"Password",id:"rePassword",name:"rePassword",onChange:function(e){return g(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Register")),r.a.createElement("li",null,"Already have an account? ",r.a.createElement(i.b,{to:"/signin"},"Sign-In")))))};var T=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),l=a[0],u=a[1],i=Object(n.useState)(""),o=Object(h.a)(i,2),m=o[0],s=o[1],E=Object(n.useState)(""),S=Object(h.a)(E,2),v=S[0],g=S[1],y=Object(n.useState)(""),I=Object(h.a)(y,2),_=I[0],R=I[1],O=Object(n.useState)(""),C=Object(h.a)(O,2),N=C[0],U=C[1],T=Object(n.useState)(""),j=Object(h.a)(T,2),w=j[0],k=j[1],A=Object(n.useState)(""),D=Object(h.a)(A,2),P=D[0],L=D[1],F=Object(c.c)((function(e){return e.productList})),x=(F.loading,F.products),G=(F.error,Object(c.c)((function(e){return e.productSave}))),Q=G.loading,V=(G.success,G.error),J=Object(c.b)();return Object(n.useEffect)((function(){return J(b()),function(){}}),[]),r.a.createElement("div",{className:"content content-margined"},r.a.createElement("div",{className:"product-header"},r.a.createElement("h3",null,"Products"),r.a.createElement("button",null,"Create Product")),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),J((t={name:l,price:m,image:v,brand:_,category:N,countInStock:w,description:P},function(){var e=Object(p.a)(d.a.mark((function e(a,n){var r,c,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_SAVE_REQUEST",payload:t}),r=n(),c=r.userSignin.userInfo,e.next=5,f.a.post("/api/products",t,{headers:{Authorization:"Bearer"+c.token}});case 5:l=e.sent,u=l.data,a({type:"PRODUCT_SAVE_SUCCESS",payload:u}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"PRODUCT_SAVE_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Create Product")),r.a.createElement("li",null,Q&&r.a.createElement("div",null,"Loading..."),V&&r.a.createElement("div",null,V)),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"name",name:"name",id:"name",onChange:function(e){return u(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"price",id:"price",name:"price",onChange:function(e){return s(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"image"},"Image"),r.a.createElement("input",{type:"text",id:"image",name:"image",onChange:function(e){return g(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"brand"},"Brand"),r.a.createElement("input",{type:"brand",id:"brand",name:"brand",onChange:function(e){return R(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("input",{type:"category",id:"category",name:"category",onChange:function(e){return U(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"countInStock"},"Count In Stock"),r.a.createElement("input",{type:"countInStock",id:"countInStock",name:"price",onChange:function(e){return k(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",onChange:function(e){return L(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Create")))),r.a.createElement("div",{className:"product-list"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Brand"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,x.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.brand),r.a.createElement("td",null,r.a.createElement("button",null,"Edit"),r.a.createElement("button",null,"Delete")))})))))))};var j=function(){var e=Object(c.c)((function(e){return e.userSignin})).userInfo;return r.a.createElement(i.a,null,r.a.createElement("div",{className:"grid-container"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"brand"},r.a.createElement("button",{onClick:function(){document.querySelector(".sidebar").classList.add("open")}},"\u2630"),r.a.createElement(i.b,{to:"/"},"Ecommerce")),r.a.createElement("div",{className:"header-links"},r.a.createElement("a",{href:"cart.html"},"Cart"),e?r.a.createElement(i.b,{to:"/profile"},e.name):r.a.createElement(i.b,{to:"/signin"},"Sign In"))),r.a.createElement("aside",{className:"sidebar"},r.a.createElement("h3",null,"Shopping Categories"),r.a.createElement("button",{className:"sidebar-close-button",onClick:function(){document.querySelector(".sidebar").classList.remove("open")}},"x"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"index.html"},"Pants")),r.a.createElement("li",null,r.a.createElement("a",{href:"index.html"},"Shirts")))),r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"content"},r.a.createElement(o.a,{path:"/",component:v,exact:!0}),r.a.createElement(o.a,{path:"/product/:id",component:y}),r.a.createElement(o.a,{path:"/cart/:id?",component:O}),r.a.createElement(o.a,{path:"/signin",component:N}),r.a.createElement(o.a,{path:"/register",component:U}),r.a.createElement(o.a,{path:"/products",component:T}))),r.a.createElement("footer",{className:"footer"},"All right reserved.")))},w=a(42);var k=a(16),A=a(29);var D=a(15),P=D.USER_SIGNIN_REQUEST,L=D.USER_SIGNIN_SUCCESS,F=D.USER_SIGNIN_FAIL,x=D.USER_REGISTER_REQUEST,G=D.USER_REGISTER_SUCCESS,Q=D.USER_REGISTER_FAIL;var V={cart:{cartItems:_.a.getJSON("cartItems")||[]},userSignin:{userInfo:_.a.getJSON("userInfo")||null}},J=Object(k.c)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:t.payload};case"PRODUCT_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return{loading:!0};case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD_ITEM":var a=t.payload,n=e.cartItems.find((function(e){return e.product===a.product}));return n?Object(A.a)(Object(A.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===n.product?a:e}))}):{cartItems:[].concat(Object(g.a)(e.cartItems),[a])};case"CART_REMOVE_ITEMS":return{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))};default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{loading:!0};case L:return{loading:!1,userInfo:t.payload};case F:return{loading:!1,error:t.payload};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{loading:!0};case G:return{loading:!1,userInfo:t.payload};case Q:return{loading:!1,error:t.payload};default:return e}},productSave:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_SAVE_REQUEST":return{loading:!0};case"PRODUCT_SAVE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"PRODUCT_SAVE_FAIL":return{loading:!1,error:t.payload};default:return e}}}),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||k.d,M=Object(k.e)(J,V,q(Object(k.a)(w.a)));u.a.render(r.a.createElement(c.a,{store:M},r.a.createElement(j,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.fbb92de4.chunk.js.map